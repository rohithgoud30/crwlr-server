FROM python:3.11-slim

WORKDIR /app

# Install Python dependencies (minimal set)
RUN pip install --no-cache-dir fastapi uvicorn

# Copy only the necessary files
COPY run.py .
COPY app/main.py ./app/

# Set environment variables
ENV PORT=8080
ENV PYTHONUNBUFFERED=1

# Run the application using run.py
CMD ["python", "-u", "run.py"]
